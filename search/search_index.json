{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"KEBA KeEnergy \u2013 Home Assistant Integration for KEBA heat pumps","text":"<p>KEBA KeEnergy Integration is a powerful custom Home Assistant integration that allows you to connect and monitor KEBA-based heat pumps directly within your smart home. The integration exposes data from the KEBA KeEnergy web interface as Home Assistant entities for monitoring, control, and automation of heating and hot water systems.</p> <p></p> <p>Take a look at the example page in the Wiki to create awesome dashboards in Home Assistant.</p>"},{"location":"#with-the-keba-keenergy-home-assistant-integration-you-can","title":"With the KEBA KeEnergy Home Assistant Integration, you can","text":"<ul> <li>Connects to your KEBA heat pump via the KeEnergy Web HMI API using host and port</li> <li>Monitor temperatures, operating states and system settings</li> <li>Control operating modes and parameters directly from Home Assistant</li> <li>Build automations based on heating demand, energy usage or schedules</li> <li>This turns your heat pump into a fully integrated smart-home component</li> </ul>"},{"location":"#features","title":"Features","text":"<ul> <li>Automatic discovery of KEBA KeEnergy-based systems</li> <li>Compatible with multiple KEBA-controlled heat pumps</li> <li>Works as a Home Assistant custom integration (HACS supported)</li> <li>Provides a full set of entities \u2013 sensors, binary sensors, number and select entities for:</li> <li>Heat pump</li> <li>Heating circuit</li> <li>Solar circuit</li> <li>Hot water tank</li> <li>Buffer tank</li> <li>External heat source</li> </ul> <p>Looking for more information? The Wiki contains in-depth documentation.</p>"},{"location":"#supported-systems","title":"Supported systems","text":"<p>The KEBA KeEnergy Integration works with heat pumps that provide a KEBA KeEnergy Web HMI interface. It is successfully used with devices from manufacturers such as M-TEC, Windhager and ino, as well as other systems based on KEBA controls.</p>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>A running instance of Home Assistant with HACS installed for managing custom integrations.</li> <li>Network connectivity from the Home Assistant host to the KEBA heat pump\u2019s Web HMI interface,   including proper host/IP and port access.</li> </ul>"},{"location":"#getting-started","title":"Getting started","text":"<ol> <li>Install this integration with HACS (search for \u201cKEBA KeEnergy\u201d) or copy the contents of this repository into the    <code>custom_components/keba_keenergy</code> directory.</li> <li>Restart Home Assistant after installation completes.</li> <li>Start the configuration flow: go to <code>Configuration</code> -&gt; <code>Integrations</code>, click the <code>+ Add Integration</code> and select    <code>KEBA KeEnergy</code> from the list.</li> <li>Add IP address or hostname of your KEBA KeEnergy device.</li> <li>Read the FAQ and enjoy :-)</li> </ol>"},{"location":"keba-keenergy/home-assistant/changelog/","title":"Changelog","text":""},{"location":"keba-keenergy/home-assistant/changelog/#181-2025-02-20","title":"[1.8.1] - 2025-02-20","text":""},{"location":"keba-keenergy/home-assistant/changelog/#fixed","title":"Fixed","text":""},{"location":"keba-keenergy/home-assistant/changelog/#fixed-missing-heating-curve-names-issue-36","title":"Fixed missing heating curve names (Issue #36)","text":""},{"location":"keba-keenergy/home-assistant/changelog/#180-2025-02-17","title":"[1.8.0] - 2025-02-17","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added","title":"Added","text":"<ul> <li>Added sensors for \u201cTarget overheating\u201d, \u201cCurrent overheating\u201d, and \u201cExpansion valve position\u201d (Issue #29)</li> <li>Added sensor \u201cCirculation return temperature\u201d to the hot water tank (Issue #24)</li> <li>Added binary sensor \u201cCirculation pump state\u201d to the hot water tank (Issue #24)</li> <li>Added select entity \u201cHeating curve\u201d to the heating circuit (Issue #24)</li> <li>Added number entity \u201cHeating curve offset\u201d to the heating circuit (Issue #24)</li> <li>Added number entity \u201cHeating curve slope\u201d to the heating circuit (Issue #24)</li> <li>Added switch entity \u201cUse heating curve\u201d to the heating circuit (Issue #24)</li> <li>Added service \u201cset_heating_curve_points\u201d (Issue #24)</li> <li>Added sensor <code>Heating curve</code> with points as extra state attributes (Issue #24)</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#changed","title":"Changed","text":"<ul> <li>The entity icons have been slightly improved</li> <li>Update translations</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#fixed_1","title":"Fixed","text":"<ul> <li>Changed wrong unit J to kWh on sensors \u201cSolar circuit Heating energy\u201d and \u201cSolar circuit Daily energy\u201d (Issue #32)</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#170-2025-01-31","title":"[1.7.0] - 2025-01-31","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_1","title":"Added","text":"<ul> <li>Added service to set away date range (Issue #20)</li> <li>Added blueprint to set away date range from a calendar entry (Issue #20)</li> <li>Added issue warning when more than 30 write operations are performed per week (Issue #23)</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#changed_1","title":"Changed","text":"<ul> <li>Bump <code>keba_keenergy_api</code> to v2.8.1</li> <li>Changed documentation link to"},{"location":"keba-keenergy/home-assistant/changelog/#161-2025-01-24","title":"[1.6.1] - 2025-01-24","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_2","title":"Added","text":"<ul> <li>Added new sensor \u201cTarget temperature (selected)\u201d to the heat circuit.   This sensor show always the right target temperature (day, night, \u2026) without the offset.</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#fixed_2","title":"Fixed","text":"<ul> <li>Fixed slow API update and refresh on entities that can changed e.g. \u201cOperation mode\u201d or the \u201cPreset mode\u201d   in the climate entity</li> <li>Fixed climate entity show wrong target temperature (Issue #19)</li> <li>Fixed preset mode \u201caway\u201d in the climate entity (Issue #21)</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#160-2025-01-18","title":"[1.6.0] - 2025-01-18","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_3","title":"Added","text":"<ul> <li>Added support for switch valves</li> <li>Added diagnostic sensors \u201cCompressor\u201d, \u201cSource actuator\u201d, \u201cSource\u201d, \u201cSource pressure\u201d,   \u201cThree-phase\u201d and \u201cVariable drive frequency\u201d to the heat pump device</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#fixed_3","title":"Fixed","text":"<ul> <li>Fixed unnecessary API calls for values that did never change e.g. number of heating circuits</li> <li>Don\u2019t execute API calls for KEBA software versions that did not support this API call</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#150-2025-01-11","title":"[1.5.0] - 2025-01-11","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_4","title":"Added","text":"<ul> <li>Support for buffer tanks</li> <li>Added sensors \u201cSource pump speed\u201d, \u201cVaporizer temperature\u201d, \u201cCondenser temperature\u201d and \u201cSubstate\u201d to the heat pump</li> <li>Added number control for the \u201ccompressor night speed\u201d to the heat pump</li> <li>Added switch control for the \u201ccompressor use night speed\u201d to the heat pump</li> <li>Added switch control for the \u201cpriority 1 before 2\u201d to the solar circuit</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#fixed_4","title":"Fixed","text":"<ul> <li>Authentication does not work with umlauts</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#140-2025-01-03","title":"[1.4.0] - 2025-01-03","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_5","title":"Added","text":"<ul> <li>Support for solar circuits</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#131-2025-12-09","title":"[1.3.1] - 2025-12-09","text":""},{"location":"keba-keenergy/home-assistant/changelog/#fixed_5","title":"Fixed","text":"<ul> <li>missing heating circuit heat request modes in the climate entity HAVC action</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#130-2025-10-29","title":"[1.3.0] - 2025-10-29","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_6","title":"Added","text":"<ul> <li>Diagnostic sensors for CPU usage, RAM usage and free RAM</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#122-2025-10-19","title":"[1.2.2] - 2025-10-19","text":""},{"location":"keba-keenergy/home-assistant/changelog/#fixed_6","title":"Fixed","text":"<ul> <li>API errors when fetch data from a device that is not installed e.g. zero external heat sources</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#changed_2","title":"Changed","text":"<ul> <li>Update translations</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#121-2025-10-15","title":"[1.2.1] - 2025-10-15","text":""},{"location":"keba-keenergy/home-assistant/changelog/#fixed_7","title":"Fixed","text":"<ul> <li>invalid API endpoints for devices (e.g. AP420/H-A) that did not support this</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#120-2025-10-15","title":"[1.2.0] - 2025-10-15","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_7","title":"Added","text":"<ul> <li>Number entities to control the target temperature offset</li> <li>Support username and password for basic auth (newer software versions now required basic auth)</li> <li>External heat source device and entities</li> <li>Entity \u201cOperating hours\u201d, \u201cMaximum runtime\u201d and \u201cActivation counter\u201d to the head pump</li> <li>Entity \u201cHeat request\u201d, \u201cOperating hours\u201d, \u201cMaximum runtime\u201d and \u201cActivation counter\u201d to the external heat source</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#changed_3","title":"Changed","text":"<ul> <li>Updated german and english translations</li> <li>Removed entities to control the night speed of the compressor (for backward compatibility with older software   versions)</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#110-2025-09-30","title":"[1.1.0] - 2025-09-30","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_8","title":"Added","text":"<ul> <li>Energy management sensors for the head pump device</li> <li>Select entities for all operation modes</li> <li>Switch entity to control the compressor speed at night</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#changed_4","title":"Changed","text":"<ul> <li>German and english translations</li> <li>The manufacturer and model name from the head pump device translation</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#101-2025-09-12","title":"[1.0.1] - 2025-09-12","text":""},{"location":"keba-keenergy/home-assistant/changelog/#added_9","title":"Added","text":"<ul> <li>German translations</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#fixed_8","title":"Fixed","text":"<ul> <li>Wrong unit for room humidity sensor</li> </ul>"},{"location":"keba-keenergy/home-assistant/changelog/#100-2025-09-1","title":"[1.0.0] - 2025-09-1","text":"<p>Initial release</p>"},{"location":"keba-keenergy/home-assistant/contributing/","title":"Contributing","text":""},{"location":"keba-keenergy/home-assistant/contributing/#get-involved","title":"Get Involved","text":"<p>The KEBA KeEnergy Integration is an open-source project and contributions are welcome. You can:</p> <ul> <li>Report issues or request new features</li> <li>Improve documentation or translations</li> <li>Contribute code</li> <li>Support the project by starring it on GitHub \u2b50</li> </ul>"},{"location":"keba-keenergy/home-assistant/contributing/#guidelines","title":"Guidelines","text":"<p>Contributing to this project should be as easy and transparent as possible, whether it\u2019s:</p> <ul> <li>Reporting a bug</li> <li>Discussing the current state of the code</li> <li>Submitting a fix</li> <li>Proposing new features</li> </ul>"},{"location":"keba-keenergy/home-assistant/contributing/#getting-started","title":"Getting started","text":"<p>Run development server:</p> <ol> <li>Set up the project with <code>./scripts/setup.sh</code>.</li> <li>Run <code>./scripts/develop.sh</code>.</li> <li>Open http://127.0.0.1:8123 in your browser.</li> </ol>"},{"location":"keba-keenergy/home-assistant/contributing/#github-is-used-for-everything","title":"GitHub is used for everything","text":"<p>GitHub is used to host code, to track issues and feature requests, as well as accept pull requests.</p> <p>Pull requests are the best way to propose changes to the codebase.</p> <ol> <li>Fork the repo and create your branch from <code>main</code></li> <li>If you\u2019ve changed something, update the documentation.</li> <li>Make sure your code lints with <code>./scripts/lint.sh</code>.</li> <li>Test you contribution.</li> <li>Issue that pull request!</li> </ol>"},{"location":"keba-keenergy/home-assistant/contributing/#report-bugs-using-githubs-issues","title":"Report bugs using GitHub\u2019s issues","text":"<p>GitHub issues are used to track public bugs. Report a bug by opening a new issue; it\u2019s that easy!</p>"},{"location":"keba-keenergy/home-assistant/contributing/#write-bug-reports-with-detail-background-and-sample-code","title":"Write bug reports with detail, background, and sample code","text":"<p>Great Bug Reports tend to have:</p> <ul> <li>A quick summary and/or background</li> <li>Steps to reproduce</li> <li>Be specific!</li> <li>Give sample code if you can.</li> <li>What you expected would happen</li> <li>What actually happens</li> <li>Notes (possibly including why you think this might be happening, or stuff you tried that didn\u2019t work)</li> </ul> <p>People love thorough bug reports. I\u2019m not even kidding.</p>"},{"location":"keba-keenergy/home-assistant/contributing/#use-a-consistent-coding-style","title":"Use a Consistent Coding Style","text":"<p>Use black to make sure the code follows the style.</p> <pre><code>uv run black .\n</code></pre>"},{"location":"keba-keenergy/home-assistant/contributing/#test-your-code-modification","title":"Test your code modification","text":"<p>To test the code we use pytest:</p> <pre><code>uv run pytest -n auto\n</code></pre>"},{"location":"keba-keenergy/home-assistant/contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under its Apache License.</p>"},{"location":"keba-keenergy/home-assistant/donation/","title":"Donation","text":"<p>I put a lot of time into this project. If you like it, you can support me with a donation.</p> <p></p>"},{"location":"keba-keenergy/home-assistant/wiki/examples/","title":"Examples","text":""},{"location":"keba-keenergy/home-assistant/wiki/examples/#blueprints","title":"Blueprints","text":""},{"location":"keba-keenergy/home-assistant/wiki/examples/#set-away-date-range","title":"Set away date range","text":"<p>Sets the away date range of a KEBA KeEnergy control unit based on a calendar event when a specific keyword is found in the event description.</p> <p> Download blueprint</p>"},{"location":"keba-keenergy/home-assistant/wiki/examples/#templates","title":"Templates","text":"<p>A template sensor to get the delta from the heatpump source input and output:</p> <pre><code>template:\n  - sensor:\n    - name: Heat pump source temperature delta\n      unique_id: heat_pump_source_temperature_delta\n      state: &gt;-\n        {% set input = states(\"sensor.keba_keenergy_12345678_heat_pump_source_input_temperature\")|float(0) %}\n        {% set output = states(\"sensor.keba_keenergy_12345678_heat_pump_source_output_temperature\")|float(0) %}\n        {{ (input - output)|round(2) }}\n      icon: mdi:thermometer\n      unit_of_measurement: \u00b0C\n      device_class: temperature\n      state_class: measurement\n</code></pre> <p>A template sensor to get the delta from the heat pump flow and return flow. This is also posible with the flow and return flow sensor from the heat circuits (if available).</p> <pre><code>template:\n  - sensor:\n    - name: Heat pump flow and return temperature delta\n      unique_id: heat_pump_flow_and_return_temperature_delta\n      state: &gt;-\n        {% set flow = states(\"sensor.keba_keenergy_12345678_heat_pump_flow_temperature\")|float(0) %}\n        {% set return_flow = states(\"sensor.keba_keenergy_12345678_heat_pump_return_flow_temperature\")|float(0) %}\n        {{ (flow - return_flow)|round(2) }}\n      icon: mdi:thermometer\n      unit_of_measurement: \u00b0C\n      device_class: temperature\n      state_class: measurement\n</code></pre>"},{"location":"keba-keenergy/home-assistant/wiki/examples/#visualizations","title":"Visualizations","text":"<p>All visualisations required the Lovelace Mini Graph Card.</p>"},{"location":"keba-keenergy/home-assistant/wiki/examples/#outdoor-temperature","title":"Outdoor temperature","text":"<p>An awesome chart for your outdoor temperature. Charts line color is based on outdoor temperature value.</p> <p></p> <pre><code>- type: custom:mini-graph-card\n  name: Outdoor temperature\n  entities:\n    - entity: sensor.keba_keenergy_12345678_outdoor_temperature\n      name: Temperature\n  line_width: 3\n  hour24: true\n  points_per_hour: 12\n  show:\n    labels: false\n    extrema: true\n  color_thresholds:\n    - value: -10\n      color: \"#0020E7\"\n    - value: 0\n      color: \"#008EE7\"\n    - value: 10\n      color: \"#00E7DD\"\n    - value: 20\n      color: \"#00E758\"\n    - value: 25\n      color: \"#BEE700\"\n    - value: 30\n      color: \"#E79700\"\n    - value: 35\n      color: \"#E73700\"\n</code></pre>"},{"location":"keba-keenergy/home-assistant/wiki/faq/","title":"FAQ - Troubleshooting","text":"<p>Q: I can\u2019t connect to the KEBA KeEnergy device and get \u201cFailed to connect\u201d.</p> <p>A: Always enter the IP or hostname without the port or protocol! Correct: <code>10.10.0.1</code> Incorrect: <code>10.10.0.1:443</code> or <code>https://ap4040.local</code></p> <p>Q: Is it possible to create automations that change the parameters on the controller?</p> <p>A: The built-in flash memory (NAND) has a limited lifespan. Excessive writing that deviates from normal user habits should be avoided. (Issue #23)</p>"},{"location":"keba-keenergy/home-assistant/wiki/supported-devices/","title":"Supported devices","text":"<p>This integration supports the following manufacturers and devices:</p> Manufacturer Supported Tested control unit Tested heat pump M-TEC \u2705 AP 420/H-A WPS-412-XHV \u2705 AP 440/H-A WPS26, WPS412, AHPA618, AHPC27 ino \u2705 AP 440/H-A Bartl 4.0 Windhager \u2705 AP 440/H-A Evo 9 <p>If you use an unsupported device, and it\u2019s work than let me know this.</p>"}]}